<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Recipe Finder</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="manifest" href="/manifest.json" />
<meta name="theme-color" content="#6100fe" />
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" sizes="180x180" href="images/1.png" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<style>
    :root {
        --main-color: #2193b0;
        --main-color2: #6dd5ed;
    }
    * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
    body {
        margin: 0; padding: 0;
        background: linear-gradient(to right, var(--main-color), var(--main-color2));
        display: flex; flex-direction: column;
        justify-content: center; align-items: center;
        min-height: 100vh; transition: background 0.5s ease;
        color: white; padding-bottom: 70px;
    }
    h1 { color: white; margin-top: 30px; margin-bottom: 20px; font-size: 2.5rem;
         text-shadow: 2px 2px 4px rgba(0,0,0,0.3);}
    .theme-switcher { position: absolute; top: 20px; right: 20px; }
    .theme-button { background: transparent; border: none; font-size: 24px; color: white;
                    cursor: pointer; padding: 5px; transition: transform 0.2s ease;}
    .theme-button:hover { transform: scale(1.2); }
    .theme-list {
        display: none; position: absolute; right: 0; margin-top: 10px;
        background: white; padding: 0.5rem; border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1); flex-wrap: wrap;
        max-width: 200px; gap: 6px; z-index: 100;
    }
    .theme-list.show { display: flex; }
    .theme-color {
        width: 25px; height: 25px; border-radius: 50%; cursor: pointer;
        border: 2px solid #fff; box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }
    #searchForm { display: flex; gap: 10px; margin-bottom: 30px; width: 90%; max-width: 500px; }
    #ingredientsInput {
        flex-grow: 1; padding: 0.7rem; border: 2px solid rgba(255,255,255,0.5);
        border-radius: 8px; background: rgba(255,255,255,0.1);
        color: white; font-size: 1rem; transition: border-color 0.3s ease;
    }
    #ingredientsInput::placeholder { color: rgba(255,255,255,0.7); }
    #ingredientsInput:focus { outline: none; border-color: white; }
    #searchBtn {
        padding: 0.7rem 1.5rem; background: var(--main-color); color: white;
        border: none; border-radius: 8px; cursor: pointer; font-size: 1rem;
        transition: background 0.3s ease, transform 0.2s ease;
    }
    #searchBtn:hover { background: var(--main-color2); transform: translateY(-2px);}
    #results {
        display: flex; flex-wrap: wrap; justify-content: center;
        gap: 20px; padding: 20px; width: 100%; max-width: 1200px;
    }
    #noResults { color: white; font-size: 1.2rem; margin-top: 20px; }
    .card {
        background: rgba(255,255,255,0.15); border-radius: 15px; overflow: hidden;
        box-shadow: 0 8px 30px rgba(0,0,0,0.3); width: 300px; display: flex; flex-direction: column;
        transition: transform 0.3s ease, box-shadow 0.3s ease; backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
    }
    .card:hover { transform: translateY(-5px); box-shadow: 0 12px 40px rgba(0,0,0,0.4);}
    .card img { width: 100%; height: 200px; object-fit: cover; }
    .card-body { padding: 15px; display: flex; flex-direction: column; align-items: center;
                 text-align: center; flex-grow: 1;}
    .card-title { font-size: 1.4rem; font-weight: bold; margin-bottom: 15px; color: white;}
    .card button {
        background: var(--main-color); color: white; border: none; border-radius: 8px;
        padding: 10px 20px; cursor: pointer; font-size: 1rem;
        transition: background 0.3s ease; margin-top: auto;
    }
    .card button:hover { background: var(--main-color2); }
    footer {
        flex-shrink: 0; text-align: center; color: white; font-size: 1rem;
        padding: 15px 0; background: transparent; position: fixed;
        width: 100%; bottom: 0; left: 0;
        box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    }
    footer a { color: white; text-decoration: underline; font-weight: bold; }
    @media (max-width: 768px) {
        h1 { font-size: 2rem; }
        #searchForm { flex-direction: column; align-items: center; }
        #ingredientsInput, #searchBtn { width: 100%; }
        .card { width: 90%; }
    }
</style>
</head>
<body>

<div class="theme-switcher">
    <button class="theme-button" onclick="toggleThemeMenu()">
        <i class="fas fa-palette"></i>
    </button>
    <div id="themeList" class="theme-list"></div>
</div>

<h1>Recipe Finder</h1>

<form id="searchForm">
    <input type="text" id="ingredientsInput"
           placeholder="Enter ingredients (e.g., chicken, pasta or tomato)" required />
    <button type="submit" id="searchBtn">Search</button>
</form>

<div id="results"></div>
<div id="noResults" style="display:none;">No recipes found. Try different ingredients.</div>

<footer>
    Made with ❤️ by akb for Hackclub
</footer>

<script>
    const themes = [
        ['#4facfe', '#00f2fe'], ['#ff9966', '#ff5e62'], ['#4a00e0', '#8e2de2'],
        ['#7F00FF', '#E100FF'], ['#56CCF2', '#2F80ED'], ['#43e97b', '#38f9d7'],
        ['#f953c6', '#b91d73'], ['#30cfd0', '#330867'], ['#f7797d', '#FBD786'],
        ['#00c3ff', '#ffff1c'], ['#3a7bd5', '#3a6073'], ['#FF512F', '#DD2476'],
        ['#1D976C', '#93F9B9'], ['#ff6a00', '#ee0979'], ['#2193b0', '#6dd5ed'],
        ['#cc2b5e', '#753a88'], ['#232526', '#1c1c1c'], ['#0f2027', '#203a43'],
        ['#1c1c1c', '#282828'], ['#232526', '#414345'], ['#000000', '#434343'],
        ['#141e30', '#243b55'], ['#000428', '#004e92']
    ];

    const themeList = document.getElementById('themeList');
    const body = document.body;

    themes.forEach(([c1, c2]) => {
        const colorDiv = document.createElement('div');
        colorDiv.className = 'theme-color';
        colorDiv.style.background = `linear-gradient(to right, ${c1}, ${c2})`;
        colorDiv.onclick = () => applyTheme(c1, c2);
        themeList.appendChild(colorDiv);
    });

    function toggleThemeMenu() {
        themeList.classList.toggle('show');
    }

    function applyTheme(color1, color2) {
        document.documentElement.style.setProperty('--main-color', color1);
        document.documentElement.style.setProperty('--main-color2', color2);
        body.style.background = `linear-gradient(to right, ${color1}, ${color2})`;
        themeList.classList.remove('show');
        updateThemeColorMeta(color1);
    }

    function updateThemeColorMeta(color) {
        let metaThemeColor = document.querySelector('meta[name="theme-color"]');
        if (!metaThemeColor) {
            metaThemeColor = document.createElement('meta');
            metaThemeColor.setAttribute('name', 'theme-color');
            document.head.appendChild(metaThemeColor);
        }
        metaThemeColor.setAttribute('content', color);
    }

    updateThemeColorMeta(
        getComputedStyle(document.documentElement).getPropertyValue('--main-color').trim()
    );

    const searchForm = document.getElementById('searchForm');
    const ingredientsInput = document.getElementById('ingredientsInput');
    const resultsDiv = document.getElementById('results');
    const noResultsDiv = document.getElementById('noResults');

    searchForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const ingredients = ingredientsInput.value.trim();
        if (!ingredients) {
            resultsDiv.innerHTML = '';
            noResultsDiv.textContent = 'Please enter ingredients to search.';
            noResultsDiv.style.display = 'block';
            return;
        }

        resultsDiv.innerHTML = '';
        noResultsDiv.style.display = 'none';

        const firstIngredient = ingredients.split(',')[0].trim();

        try {
            const response = await fetch(
                `https://www.themealdb.com/api/json/v1/1/filter.php?i=${encodeURIComponent(firstIngredient)}`
            );
            const data = await response.json();

            if (data.meals) {
                data.meals.forEach((meal) => {
                    const card = document.createElement('div');
                    card.classList.add('card');
                    card.innerHTML = `
                        <img src="${meal.strMealThumb}" alt="${meal.strMeal}" />
                        <div class="card-body">
                            <div class="card-title">${meal.strMeal}</div>
                            <button data-id="${meal.idMeal}">View Recipe</button>
                        </div>
                    `;
                    resultsDiv.appendChild(card);
                });
            } else {
                noResultsDiv.style.display = 'block';
                noResultsDiv.textContent = 'No recipes found for these ingredients. Try different ones!';
            }
        } catch (error) {
            console.error('Error fetching recipes:', error);
            noResultsDiv.textContent = 'Error fetching recipes. Please try again later.';
            noResultsDiv.style.display = 'block';
        }
    });
</script>
